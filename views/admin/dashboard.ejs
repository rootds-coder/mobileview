<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="page-title mb-1">Dashboard</h1>
        <p class="text-muted mb-0">Welcome back! Here's what's happening with your website.</p>
    </div>
    <div class="d-flex gap-2">
        <a href="/" target="_blank" class="btn btn-outline-primary btn-admin">
            <i class="fas fa-external-link-alt me-2"></i>View Website
        </a>
                    <a href="/sunny/posts/add" class="btn btn-primary btn-admin">
            <i class="fas fa-plus me-2"></i>New Post
        </a>
    </div>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
    <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
        <div class="stat-icon">
            <i class="fas fa-newspaper"></i>
        </div>
        <div class="stat-number" data-value="<%= stats.posts %>"><%= stats.posts %></div>
        <div class="stat-label">Total Posts</div>
        <div class="mt-3">
                            <a href="/sunny/posts" class="btn btn-sm btn-outline-primary">Manage Posts</a>
        </div>
    </div>
    <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
        <div class="stat-icon">
            <i class="fas fa-images"></i>
        </div>
        <div class="stat-number" data-value="<%= stats.gallery %>"><%= stats.gallery %></div>
        <div class="stat-label">Gallery Items</div>
        <div class="mt-3">
                            <a href="/sunny/gallery" class="btn btn-sm btn-outline-primary">Manage Gallery</a>
        </div>
    </div>
    <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
        <div class="stat-icon">
            <i class="fab fa-youtube"></i>
        </div>
        <div class="stat-number" data-value="<%= stats.videos %>"><%= stats.videos %></div>
        <div class="stat-label">YouTube Videos</div>
        <div class="mt-3">
                            <a href="/sunny/videos" class="btn btn-sm btn-outline-primary">Manage Videos</a>
        </div>
    </div>
    <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
        <div class="stat-icon">
            <i class="fas fa-envelope"></i>
        </div>
        <div class="stat-number" data-value="<%= stats.messages %>"><%= stats.messages %></div>
        <div class="stat-label">New Messages</div>
        <div class="mt-3">
                            <a href="/sunny/messages" class="btn btn-sm btn-outline-primary">View Messages</a>
        </div>
    </div>
    <div class="stat-card" data-aos="fade-up" data-aos-delay="500">
        <div class="stat-icon">
            <i class="fas fa-tools"></i>
        </div>
        <div class="stat-number" data-value="<%= stats.services %>"><%= stats.services %></div>
        <div class="stat-label">Services</div>
        <div class="mt-3">
                            <a href="/sunny/services" class="btn btn-sm btn-outline-primary">Manage Services</a>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row g-4 mb-4">
    <div class="col-lg-8">
        <div class="card" data-aos="fade-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-bolt me-2"></i>Quick Actions
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <a href="/sunny/posts/add" class="btn btn-outline-primary w-100 p-3 text-start">
                            <i class="fas fa-plus me-2"></i>
                            <div>
                                <strong>Create New Post</strong>
                                <small class="d-block text-muted">Add a new blog post</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/sunny/gallery" class="btn btn-outline-success w-100 p-3 text-start">
                            <i class="fas fa-upload me-2"></i>
                            <div>
                                <strong>Upload Gallery</strong>
                                <small class="d-block text-muted">Add new gallery items</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/sunny/videos" class="btn btn-outline-danger w-100 p-3 text-start">
                            <i class="fab fa-youtube me-2"></i>
                            <div>
                                <strong>Add Video</strong>
                                <small class="d-block text-muted">Add YouTube videos</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/sunny/services" class="btn btn-outline-warning w-100 p-3 text-start">
                            <i class="fas fa-tools me-2"></i>
                            <div>
                                <strong>Manage Services</strong>
                                <small class="d-block text-muted">Update service offerings</small>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card" data-aos="fade-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>System Info
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <small class="text-muted">Server Time</small>
                    <div class="fw-bold"><%= new Date().toLocaleString() %></div>
                </div>
                <div class="mb-3">
                    <small class="text-muted">Node.js Version</small>
                    <div class="fw-bold">v18.0.0</div>
                </div>
                <div class="mb-3">
                    <small class="text-muted">Database</small>
                    <div class="fw-bold">MySQL Connected</div>
                </div>
                <div class="mb-3">
                    <small class="text-muted">Uptime</small>
                    <div class="fw-bold">24/7 Online</div>
                </div>
                <div class="mt-4">
                    <a href="/sunny/logout" class="btn btn-outline-danger btn-sm w-100">
                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="row g-4">
    <div class="col-lg-6">
        <div class="card" data-aos="fade-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-clock me-2"></i>Recent Posts
                </h5>
            </div>
            <div class="card-body">
                <% if (recentPosts && recentPosts.length > 0) { %>
                    <div class="list-group list-group-flush">
                        <% recentPosts.forEach(post => { %>
                        <div class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">
                            <div>
                                <h6 class="mb-1"><%= post.title %></h6>
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>
                                    <%= new Date(post.created_at).toLocaleDateString() %>
                                </small>
                            </div>
                            <span class="badge bg-<%= post.status === 'published' ? 'success' : 'warning' %>">
                                <%= post.status %>
                            </span>
                        </div>
                        <% }); %>
                    </div>
                    <div class="mt-3">
                        <a href="/sunny/posts" class="btn btn-outline-primary btn-sm">View All Posts</a>
                    </div>
                <% } else { %>
                    <div class="empty-state">
                        <i class="fas fa-newspaper"></i>
                        <h6>No posts yet</h6>
                        <p class="text-muted">Create your first blog post to get started.</p>
                        <a href="/sunny/posts/add" class="btn btn-primary btn-sm">Create Post</a>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card" data-aos="fade-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-envelope me-2"></i>Recent Messages
                </h5>
            </div>
            <div class="card-body">
                <% if (recentMessages && recentMessages.length > 0) { %>
                    <div class="list-group list-group-flush">
                        <% recentMessages.forEach(message => { %>
                        <div class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">
                            <div>
                                <h6 class="mb-1"><%= message.first_name %> <%= message.last_name %></h6>
                                <small class="text-muted">
                                    <i class="fas fa-envelope me-1"></i>
                                    <%= message.message.substring(0, 50) %>...
                                </small>
                            </div>
                            <span class="badge bg-<%= message.status === 'new' ? 'danger' : 'secondary' %>">
                                <%= message.status %>
                            </span>
                        </div>
                        <% }); %>
                    </div>
                    <div class="mt-3">
                        <a href="/sunny/messages" class="btn btn-outline-primary btn-sm">View All Messages</a>
                    </div>
                <% } else { %>
                    <div class="empty-state">
                        <i class="fas fa-envelope"></i>
                        <h6>No messages yet</h6>
                        <p class="text-muted">Customer messages will appear here.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>

<!-- Website Analytics -->
<div class="row g-4 mt-4">
    <div class="col-12">
        <div class="card" data-aos="fade-up">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-chart-line me-2"></i>Website Analytics
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h4 class="text-primary mb-1">1,234</h4>
                            <small class="text-muted">Total Visitors</small>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h4 class="text-success mb-1">567</h4>
                            <small class="text-muted">Page Views</small>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h4 class="text-info mb-1">89</h4>
                            <small class="text-muted">Contact Forms</small>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h4 class="text-warning mb-1">4.8</h4>
                            <small class="text-muted">Avg. Rating</small>
                        </div>
                    </div>
                </div>
                <div class="mt-3 text-center">
                    <small class="text-muted">Analytics data is updated in real-time</small>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
</script>
<script>
// Initialize statistics counter animation
document.addEventListener('DOMContentLoaded', function() {
    const statNumbers = document.querySelectorAll('.stat-number');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const target = entry.target;
                const finalValue = parseInt(target.getAttribute('data-value'));
                animateCounter(target, 0, finalValue, 1500);
                observer.unobserve(target);
            }
        });
    });
    
    statNumbers.forEach(stat => {
        observer.observe(stat);
    });
});

function animateCounter(element, start, end, duration) {
    const range = end - start;
    const increment = range / (duration / 16);
    let current = start;
    
    const timer = setInterval(() => {
        current += increment;
        if (current >= end) {
            current = end;
            clearInterval(timer);
        }
        element.textContent = Math.floor(current);
    }, 16);
}
</script> 